# coding=utf-8
# *** WARNING: this file was generated by pulumi-language-python. ***
# *** Do not edit by hand unless you're certain you know what you are doing! ***

import builtins as _builtins
import warnings
import sys
import pulumi
import pulumi.runtime
from typing import Any, Mapping, Optional, Sequence, Union, overload
if sys.version_info >= (3, 11):
    from typing import NotRequired, TypedDict, TypeAlias
else:
    from typing_extensions import NotRequired, TypedDict, TypeAlias
from .. import _utilities

__all__ = ['RuleArgs', 'Rule']

@pulumi.input_type
class RuleArgs:
    def __init__(__self__, *,
                 type: pulumi.Input[_builtins.str],
                 value: pulumi.Input[_builtins.str],
                 description: Optional[pulumi.Input[_builtins.str]] = None):
        """
        The set of arguments for constructing a Rule resource.
        :param pulumi.Input[_builtins.str] type: The type of organization rule.
        :param pulumi.Input[_builtins.str] value: The JSON document that this organization rule implements.
        :param pulumi.Input[_builtins.str] description: The description of the organization rule.
        """
        pulumi.set(__self__, "type", type)
        pulumi.set(__self__, "value", value)
        if description is not None:
            pulumi.set(__self__, "description", description)

    @_builtins.property
    @pulumi.getter
    def type(self) -> pulumi.Input[_builtins.str]:
        """
        The type of organization rule.
        """
        return pulumi.get(self, "type")

    @type.setter
    def type(self, value: pulumi.Input[_builtins.str]):
        pulumi.set(self, "type", value)

    @_builtins.property
    @pulumi.getter
    def value(self) -> pulumi.Input[_builtins.str]:
        """
        The JSON document that this organization rule implements.
        """
        return pulumi.get(self, "value")

    @value.setter
    def value(self, value: pulumi.Input[_builtins.str]):
        pulumi.set(self, "value", value)

    @_builtins.property
    @pulumi.getter
    def description(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The description of the organization rule.
        """
        return pulumi.get(self, "description")

    @description.setter
    def description(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "description", value)


@pulumi.input_type
class _RuleState:
    def __init__(__self__, *,
                 action: Optional[pulumi.Input[_builtins.str]] = None,
                 description: Optional[pulumi.Input[_builtins.str]] = None,
                 effect: Optional[pulumi.Input[_builtins.str]] = None,
                 source_type: Optional[pulumi.Input[_builtins.str]] = None,
                 source_uuid: Optional[pulumi.Input[_builtins.str]] = None,
                 target_type: Optional[pulumi.Input[_builtins.str]] = None,
                 target_uuid: Optional[pulumi.Input[_builtins.str]] = None,
                 type: Optional[pulumi.Input[_builtins.str]] = None,
                 uuid: Optional[pulumi.Input[_builtins.str]] = None,
                 value: Optional[pulumi.Input[_builtins.str]] = None):
        """
        Input properties used for looking up and filtering Rule resources.
        :param pulumi.Input[_builtins.str] action: The action defined between source and target resources.
        :param pulumi.Input[_builtins.str] description: The description of the organization rule.
        :param pulumi.Input[_builtins.str] effect: Whether this organization rule allows or denies the action to take place between source and target resources.
        :param pulumi.Input[_builtins.str] source_type: The source resource type that this organization rule allows or denies to invoke its defined action.
        :param pulumi.Input[_builtins.str] source_uuid: The UUID of the resource that this organization rule allows or denies invocating its defined action.
        :param pulumi.Input[_builtins.str] target_type: The target resource type that this organization rule allows or denies the source to respective action.
        :param pulumi.Input[_builtins.str] target_uuid: The UUID of the target resource that this organization rule allows or denies invocation its respective action.
        :param pulumi.Input[_builtins.str] type: The type of organization rule.
        :param pulumi.Input[_builtins.str] uuid: The UUID of the organization rule.
        :param pulumi.Input[_builtins.str] value: The JSON document that this organization rule implements.
        """
        if action is not None:
            pulumi.set(__self__, "action", action)
        if description is not None:
            pulumi.set(__self__, "description", description)
        if effect is not None:
            pulumi.set(__self__, "effect", effect)
        if source_type is not None:
            pulumi.set(__self__, "source_type", source_type)
        if source_uuid is not None:
            pulumi.set(__self__, "source_uuid", source_uuid)
        if target_type is not None:
            pulumi.set(__self__, "target_type", target_type)
        if target_uuid is not None:
            pulumi.set(__self__, "target_uuid", target_uuid)
        if type is not None:
            pulumi.set(__self__, "type", type)
        if uuid is not None:
            pulumi.set(__self__, "uuid", uuid)
        if value is not None:
            pulumi.set(__self__, "value", value)

    @_builtins.property
    @pulumi.getter
    def action(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The action defined between source and target resources.
        """
        return pulumi.get(self, "action")

    @action.setter
    def action(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "action", value)

    @_builtins.property
    @pulumi.getter
    def description(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The description of the organization rule.
        """
        return pulumi.get(self, "description")

    @description.setter
    def description(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "description", value)

    @_builtins.property
    @pulumi.getter
    def effect(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        Whether this organization rule allows or denies the action to take place between source and target resources.
        """
        return pulumi.get(self, "effect")

    @effect.setter
    def effect(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "effect", value)

    @_builtins.property
    @pulumi.getter(name="sourceType")
    def source_type(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The source resource type that this organization rule allows or denies to invoke its defined action.
        """
        return pulumi.get(self, "source_type")

    @source_type.setter
    def source_type(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "source_type", value)

    @_builtins.property
    @pulumi.getter(name="sourceUuid")
    def source_uuid(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The UUID of the resource that this organization rule allows or denies invocating its defined action.
        """
        return pulumi.get(self, "source_uuid")

    @source_uuid.setter
    def source_uuid(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "source_uuid", value)

    @_builtins.property
    @pulumi.getter(name="targetType")
    def target_type(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The target resource type that this organization rule allows or denies the source to respective action.
        """
        return pulumi.get(self, "target_type")

    @target_type.setter
    def target_type(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "target_type", value)

    @_builtins.property
    @pulumi.getter(name="targetUuid")
    def target_uuid(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The UUID of the target resource that this organization rule allows or denies invocation its respective action.
        """
        return pulumi.get(self, "target_uuid")

    @target_uuid.setter
    def target_uuid(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "target_uuid", value)

    @_builtins.property
    @pulumi.getter
    def type(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The type of organization rule.
        """
        return pulumi.get(self, "type")

    @type.setter
    def type(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "type", value)

    @_builtins.property
    @pulumi.getter
    def uuid(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The UUID of the organization rule.
        """
        return pulumi.get(self, "uuid")

    @uuid.setter
    def uuid(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "uuid", value)

    @_builtins.property
    @pulumi.getter
    def value(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The JSON document that this organization rule implements.
        """
        return pulumi.get(self, "value")

    @value.setter
    def value(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "value", value)


@pulumi.type_token("buildkite:Organization/rule:Rule")
class Rule(pulumi.CustomResource):
    @overload
    def __init__(__self__,
                 resource_name: str,
                 opts: Optional[pulumi.ResourceOptions] = None,
                 description: Optional[pulumi.Input[_builtins.str]] = None,
                 type: Optional[pulumi.Input[_builtins.str]] = None,
                 value: Optional[pulumi.Input[_builtins.str]] = None,
                 __props__=None):
        """
        > Rules is a feature that is currently in development and enabled on an opt-in basis for early access. To have this enabled for your organization for utilizing this data source, please reach out to Buildkite's Support Team.

        An Organization Rule allows specifying explicit rules between two Buildkite resources and the desired effect/action.

        More information on organization rules can be found in the [documentation](https://buildkite.com/docs/pipelines/rules).

        ## Example Usage

        ```python
        import pulumi
        import json
        import pulumiverse_buildkite as buildkite

        # Creates a TRIGGER_BUILD organization rule with required attributes
        trigger_build_test_dev = buildkite.organization.Rule("trigger_build_test_dev",
            type="pipeline.trigger_build.pipeline",
            value=json.dumps({
                "source_pipeline": app_dev_deploy["uuid"],
                "target_pipeline": app_test_ci["uuid"],
            }))
        # Creates a ARTIFACTS_READ organization rule with an optional description
        artifacts_read_test_dev = buildkite.organization.Rule("artifacts_read_test_dev",
            type="pipeline.artifacts_read.pipeline",
            description="A rule to allow artifact reads by app_test_ci to app_dev_deploy",
            value=json.dumps({
                "source_pipeline": app_test_ci["uuid"],
                "target_pipeline": app_dev_deploy["uuid"],
            }))
        # Creates a TRIGGER_BUILD organization rule with an optional description and conditions
        trigger_build_test_dev_cond = buildkite.organization.Rule("trigger_build_test_dev_cond",
            type="pipeline.trigger_build.pipeline",
            description="A rule to allow app_dev_deploy to trigger app_test_ci builds with conditions",
            value=json.dumps({
                "source_pipeline": app_dev_deploy["uuid"],
                "target_pipeline": app_test_ci["uuid"],
                "conditions": [
                    "source.build.creator.teams includes 'deploy'",
                    "source.build.branch == 'main'",
                ],
            }))
        ```

        ## Import

        Using `pulumi import`, import resources using the `id`. For example:

        import an organization rule resource using the rules GraphQL ID

        You can use this query to find the first 50 organiation rules (adjust for less or more):

        query getOrganizationRules {

          organization(slug: "ORGANIZATION_SLUG") {

            rules(first: 50) {
            
              edges{
            
                node{
            
                  id
            
                  sourceType
            
                  targetType
            
                  action
            
                }
            
              }
            
            }

          }

        }

        Depending on the speciific source/target, you're also able to filter on the source/target information

        query getOrganizationRules {

          organization(slug: "ORGANIZATION_SLUG") {

            rules(first: 50) {
            
              edges{
            
                node{
            
                  id
            
                  sourceType
            
                  source {
            
                    ... on Pipeline{
            
                      uuid
            
                      name
            
                    }            
            
                  }
            
                  targetType
            
                  target {
            
                    ... on Pipeline{
            
                      uuid
            
                      name
            
                    }            
            
                  }
            
                  action
            
                }
            
              }
            
            }

          }

        }

        ```sh
        $ pulumi import buildkite:Organization/rule:Rule artifact_read UnVsZS0tLTAxOTE5NmU2LWNiNjctNzZiZi1iYzAyLTVhYzFiNzhhMWMyOA==
        ```

        :param str resource_name: The name of the resource.
        :param pulumi.ResourceOptions opts: Options for the resource.
        :param pulumi.Input[_builtins.str] description: The description of the organization rule.
        :param pulumi.Input[_builtins.str] type: The type of organization rule.
        :param pulumi.Input[_builtins.str] value: The JSON document that this organization rule implements.
        """
        ...
    @overload
    def __init__(__self__,
                 resource_name: str,
                 args: RuleArgs,
                 opts: Optional[pulumi.ResourceOptions] = None):
        """
        > Rules is a feature that is currently in development and enabled on an opt-in basis for early access. To have this enabled for your organization for utilizing this data source, please reach out to Buildkite's Support Team.

        An Organization Rule allows specifying explicit rules between two Buildkite resources and the desired effect/action.

        More information on organization rules can be found in the [documentation](https://buildkite.com/docs/pipelines/rules).

        ## Example Usage

        ```python
        import pulumi
        import json
        import pulumiverse_buildkite as buildkite

        # Creates a TRIGGER_BUILD organization rule with required attributes
        trigger_build_test_dev = buildkite.organization.Rule("trigger_build_test_dev",
            type="pipeline.trigger_build.pipeline",
            value=json.dumps({
                "source_pipeline": app_dev_deploy["uuid"],
                "target_pipeline": app_test_ci["uuid"],
            }))
        # Creates a ARTIFACTS_READ organization rule with an optional description
        artifacts_read_test_dev = buildkite.organization.Rule("artifacts_read_test_dev",
            type="pipeline.artifacts_read.pipeline",
            description="A rule to allow artifact reads by app_test_ci to app_dev_deploy",
            value=json.dumps({
                "source_pipeline": app_test_ci["uuid"],
                "target_pipeline": app_dev_deploy["uuid"],
            }))
        # Creates a TRIGGER_BUILD organization rule with an optional description and conditions
        trigger_build_test_dev_cond = buildkite.organization.Rule("trigger_build_test_dev_cond",
            type="pipeline.trigger_build.pipeline",
            description="A rule to allow app_dev_deploy to trigger app_test_ci builds with conditions",
            value=json.dumps({
                "source_pipeline": app_dev_deploy["uuid"],
                "target_pipeline": app_test_ci["uuid"],
                "conditions": [
                    "source.build.creator.teams includes 'deploy'",
                    "source.build.branch == 'main'",
                ],
            }))
        ```

        ## Import

        Using `pulumi import`, import resources using the `id`. For example:

        import an organization rule resource using the rules GraphQL ID

        You can use this query to find the first 50 organiation rules (adjust for less or more):

        query getOrganizationRules {

          organization(slug: "ORGANIZATION_SLUG") {

            rules(first: 50) {
            
              edges{
            
                node{
            
                  id
            
                  sourceType
            
                  targetType
            
                  action
            
                }
            
              }
            
            }

          }

        }

        Depending on the speciific source/target, you're also able to filter on the source/target information

        query getOrganizationRules {

          organization(slug: "ORGANIZATION_SLUG") {

            rules(first: 50) {
            
              edges{
            
                node{
            
                  id
            
                  sourceType
            
                  source {
            
                    ... on Pipeline{
            
                      uuid
            
                      name
            
                    }            
            
                  }
            
                  targetType
            
                  target {
            
                    ... on Pipeline{
            
                      uuid
            
                      name
            
                    }            
            
                  }
            
                  action
            
                }
            
              }
            
            }

          }

        }

        ```sh
        $ pulumi import buildkite:Organization/rule:Rule artifact_read UnVsZS0tLTAxOTE5NmU2LWNiNjctNzZiZi1iYzAyLTVhYzFiNzhhMWMyOA==
        ```

        :param str resource_name: The name of the resource.
        :param RuleArgs args: The arguments to use to populate this resource's properties.
        :param pulumi.ResourceOptions opts: Options for the resource.
        """
        ...
    def __init__(__self__, resource_name: str, *args, **kwargs):
        resource_args, opts = _utilities.get_resource_args_opts(RuleArgs, pulumi.ResourceOptions, *args, **kwargs)
        if resource_args is not None:
            __self__._internal_init(resource_name, opts, **resource_args.__dict__)
        else:
            __self__._internal_init(resource_name, *args, **kwargs)

    def _internal_init(__self__,
                 resource_name: str,
                 opts: Optional[pulumi.ResourceOptions] = None,
                 description: Optional[pulumi.Input[_builtins.str]] = None,
                 type: Optional[pulumi.Input[_builtins.str]] = None,
                 value: Optional[pulumi.Input[_builtins.str]] = None,
                 __props__=None):
        opts = pulumi.ResourceOptions.merge(_utilities.get_resource_opts_defaults(), opts)
        if not isinstance(opts, pulumi.ResourceOptions):
            raise TypeError('Expected resource options to be a ResourceOptions instance')
        if opts.id is None:
            if __props__ is not None:
                raise TypeError('__props__ is only valid when passed in combination with a valid opts.id to get an existing resource')
            __props__ = RuleArgs.__new__(RuleArgs)

            __props__.__dict__["description"] = description
            if type is None and not opts.urn:
                raise TypeError("Missing required property 'type'")
            __props__.__dict__["type"] = type
            if value is None and not opts.urn:
                raise TypeError("Missing required property 'value'")
            __props__.__dict__["value"] = value
            __props__.__dict__["action"] = None
            __props__.__dict__["effect"] = None
            __props__.__dict__["source_type"] = None
            __props__.__dict__["source_uuid"] = None
            __props__.__dict__["target_type"] = None
            __props__.__dict__["target_uuid"] = None
            __props__.__dict__["uuid"] = None
        super(Rule, __self__).__init__(
            'buildkite:Organization/rule:Rule',
            resource_name,
            __props__,
            opts)

    @staticmethod
    def get(resource_name: str,
            id: pulumi.Input[str],
            opts: Optional[pulumi.ResourceOptions] = None,
            action: Optional[pulumi.Input[_builtins.str]] = None,
            description: Optional[pulumi.Input[_builtins.str]] = None,
            effect: Optional[pulumi.Input[_builtins.str]] = None,
            source_type: Optional[pulumi.Input[_builtins.str]] = None,
            source_uuid: Optional[pulumi.Input[_builtins.str]] = None,
            target_type: Optional[pulumi.Input[_builtins.str]] = None,
            target_uuid: Optional[pulumi.Input[_builtins.str]] = None,
            type: Optional[pulumi.Input[_builtins.str]] = None,
            uuid: Optional[pulumi.Input[_builtins.str]] = None,
            value: Optional[pulumi.Input[_builtins.str]] = None) -> 'Rule':
        """
        Get an existing Rule resource's state with the given name, id, and optional extra
        properties used to qualify the lookup.

        :param str resource_name: The unique name of the resulting resource.
        :param pulumi.Input[str] id: The unique provider ID of the resource to lookup.
        :param pulumi.ResourceOptions opts: Options for the resource.
        :param pulumi.Input[_builtins.str] action: The action defined between source and target resources.
        :param pulumi.Input[_builtins.str] description: The description of the organization rule.
        :param pulumi.Input[_builtins.str] effect: Whether this organization rule allows or denies the action to take place between source and target resources.
        :param pulumi.Input[_builtins.str] source_type: The source resource type that this organization rule allows or denies to invoke its defined action.
        :param pulumi.Input[_builtins.str] source_uuid: The UUID of the resource that this organization rule allows or denies invocating its defined action.
        :param pulumi.Input[_builtins.str] target_type: The target resource type that this organization rule allows or denies the source to respective action.
        :param pulumi.Input[_builtins.str] target_uuid: The UUID of the target resource that this organization rule allows or denies invocation its respective action.
        :param pulumi.Input[_builtins.str] type: The type of organization rule.
        :param pulumi.Input[_builtins.str] uuid: The UUID of the organization rule.
        :param pulumi.Input[_builtins.str] value: The JSON document that this organization rule implements.
        """
        opts = pulumi.ResourceOptions.merge(opts, pulumi.ResourceOptions(id=id))

        __props__ = _RuleState.__new__(_RuleState)

        __props__.__dict__["action"] = action
        __props__.__dict__["description"] = description
        __props__.__dict__["effect"] = effect
        __props__.__dict__["source_type"] = source_type
        __props__.__dict__["source_uuid"] = source_uuid
        __props__.__dict__["target_type"] = target_type
        __props__.__dict__["target_uuid"] = target_uuid
        __props__.__dict__["type"] = type
        __props__.__dict__["uuid"] = uuid
        __props__.__dict__["value"] = value
        return Rule(resource_name, opts=opts, __props__=__props__)

    @_builtins.property
    @pulumi.getter
    def action(self) -> pulumi.Output[_builtins.str]:
        """
        The action defined between source and target resources.
        """
        return pulumi.get(self, "action")

    @_builtins.property
    @pulumi.getter
    def description(self) -> pulumi.Output[Optional[_builtins.str]]:
        """
        The description of the organization rule.
        """
        return pulumi.get(self, "description")

    @_builtins.property
    @pulumi.getter
    def effect(self) -> pulumi.Output[_builtins.str]:
        """
        Whether this organization rule allows or denies the action to take place between source and target resources.
        """
        return pulumi.get(self, "effect")

    @_builtins.property
    @pulumi.getter(name="sourceType")
    def source_type(self) -> pulumi.Output[_builtins.str]:
        """
        The source resource type that this organization rule allows or denies to invoke its defined action.
        """
        return pulumi.get(self, "source_type")

    @_builtins.property
    @pulumi.getter(name="sourceUuid")
    def source_uuid(self) -> pulumi.Output[_builtins.str]:
        """
        The UUID of the resource that this organization rule allows or denies invocating its defined action.
        """
        return pulumi.get(self, "source_uuid")

    @_builtins.property
    @pulumi.getter(name="targetType")
    def target_type(self) -> pulumi.Output[_builtins.str]:
        """
        The target resource type that this organization rule allows or denies the source to respective action.
        """
        return pulumi.get(self, "target_type")

    @_builtins.property
    @pulumi.getter(name="targetUuid")
    def target_uuid(self) -> pulumi.Output[_builtins.str]:
        """
        The UUID of the target resource that this organization rule allows or denies invocation its respective action.
        """
        return pulumi.get(self, "target_uuid")

    @_builtins.property
    @pulumi.getter
    def type(self) -> pulumi.Output[_builtins.str]:
        """
        The type of organization rule.
        """
        return pulumi.get(self, "type")

    @_builtins.property
    @pulumi.getter
    def uuid(self) -> pulumi.Output[_builtins.str]:
        """
        The UUID of the organization rule.
        """
        return pulumi.get(self, "uuid")

    @_builtins.property
    @pulumi.getter
    def value(self) -> pulumi.Output[_builtins.str]:
        """
        The JSON document that this organization rule implements.
        """
        return pulumi.get(self, "value")

